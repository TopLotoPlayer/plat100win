<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Registration</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background-color: #ffe600; /* жёлтый фон */
    }

    /* Верхнее меню */
    .navbar {
      background-color: black;
      padding: 10px 20px;
      border-bottom-left-radius: 50px;
      display: flex;
      gap: 15px;
    }

    .navbar a {
      color: white;
      text-decoration: none;
      font-style: italic;
      font-size: 14px;
    }

    /* Блок формы */
    .registration-box {
      border: 3px solid black;
      border-radius: 35px;
      width: 600px;
      margin: 40px auto;
      padding: 30px 40px;
      background-color: transparent;
      text-align: center;
    }

    .registration-box h2 {
      font-style: italic;
      margin-bottom: 25px;
    }

    /* Стили полей и подписей */
    .form-group {
      display: block;
      margin-top: 15px;
      text-align: left;
    }

    .form-group label {
      font-style: italic;
    }

    .form-group input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #333;
      box-sizing: border-box;
      transition: border-color 0.3s ease;
    }

    .form-group.input-error input {
      border-color: red;
    }

    .verify {
      margin-top: 20px;
      font-style: italic;
      font-size: 13px;
      text-align: center;
      text-decoration: underline;
    }

    .verification-code {
      display: none;
      margin-top: 15px;
      text-align: left;
    }

    .verification-code label {
      font-style: italic;
    }

    .verification-links {
      margin-top: 10px;
      text-align: center;
      font-size: 13px;
    }

    .verification-links a {
      font-style: italic;
      text-decoration: underline;
      margin: 0 10px;
      color: black;
    }

    .success-message {
      display: none;
    }

    .success-message h2 {
      font-style: italic;
      margin-bottom: 25px;
    }

    .account-button {
      display: inline-block;
      padding: 12px 25px;
      background-color: black;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      font-family: Arial, sans-serif;
      font-style: italic;
      font-size: 16px;
    }

    .account-button:hover {
      background-color: #333;
    }

    /* Убираем стрелки у поля ввода, сохраняя размер */
    .verification-code input {
      -moz-appearance: textfield;
    }
    .verification-code input::-webkit-outer-spin-button,
    .verification-code input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    /* Стиль для уведомления об ошибке */
    .error-message {
      display: none;
      color: red;
      font-style: italic;
      font-size: 13px;
      margin-top: 5px;
      text-align: left;
    }
  </style>
</head>
<body>

  <div class="navbar">
    <a href="index.html">Home</a>
  </div>

  <div class="registration-box">
    <h2>Complete the registration</h2>

    <div class="form-group" id="username-group">
      <label for="username"><i>Username</i></label>
      <input type="text" id="username" placeholder="Enter your username">
    </div>

    <div class="form-group" id="firstname-group">
      <label for="firstname"><i>First name</i></label>
      <input type="text" id="firstname" placeholder="Enter your first name">
    </div>

    <div class="form-group" id="secondname-group">
      <label for="secondname"><i>Second name</i></label>
      <input type="text" id="secondname" placeholder="Enter your secondname">
    </div>

    <div class="form-group" id="email-group">
      <label for="email"><i>Email address</i></label>
      <input type="email" id="email" placeholder="Enter your email">
    </div>

    <div class="form-group" id="password-group">
      <label for="password"><i>Enter the password</i></label>
      <input type="password" id="password" placeholder="Create the password">
      <ul id="password-rules" style="font-size: 13px; font-style: italic; margin-top: 10px; padding-left: 18px;">
        <li id="length">• Minimum 8 characters</li>
        <li id="uppercase">• At least one uppercase letter</li>
        <li id="lowercase">• At least one lowercase letter</li>
        <li id="digit">• At least one number</li>
        <li id="special">• At least one special character (!@#$...)</li>
      </ul>
      <div id="password-error" class="error-message"></div>
    </div>

    <div class="form-group" id="confirm-password-group">
      <label for="confirm-password"><i>Confirm the password</i></label>
      <input type="password" id="confirm-password" placeholder="Confirm the password">
      <div id="confirm-password-error" class="error-message"></div>
    </div>

    <div class="form-group" id="dob-group">
      <label for="dob"><i>Date of birth</i></label>
      <input type="date" id="dob">
      <div id="dob-error" class="error-message"></div>
    </div>

    <div class="verify" id="verify-link-container">
      <a href="#" id="verify-link">Verify your email by entering the code provided in the email</a>
    </div>

    <div class="verification-code" id="verification-code">
      <label for="code"><i>Verification code</i></label>
      <input type="text" id="code" placeholder="Enter the code">
      <div class="verification-links">
        <a href="#">Didn't get code?</a>
        <a href="#">Resend the code</a>
      </div>
    </div>

    <div class="success-message" id="success-message">
    <h2>Account registered</h2>
    <div style="display: flex; flex-direction: column; gap: 15px; align-items: center;">
      <a href="MyAccount1.html" class="account-button">My account</a>
      <a href="index.html" class="account-button">Back to Home</a>
      <a href="Play5_100.html" class="account-button">Play 5/100</a>
    </div>
  </div>

  <script>
    // Функция для проверки пароля
    function validatePassword(password) {
      const lengthValid = password.length >= 8;
      const uppercaseValid = /[A-Z]/.test(password);
      const lowercaseValid = /[a-z]/.test(password);
      const digitValid = /[0-9]/.test(password);
      const specialValid = /[!@#$%^&*(),.?":{}|<>]/.test(password);
      return {
        isValid: lengthValid && uppercaseValid && lowercaseValid && digitValid && specialValid,
        issues: {
          length: !lengthValid,
          uppercase: !uppercaseValid,
          lowercase: !lowercaseValid,
          digit: !digitValid,
          special: !specialValid
        }
      };
    }

    // Функция для проверки возраста
    function validateAge(dob) {
      const today = new Date(); // Текущая дата в момент регистрации
      const birthDate = new Date(dob);
      let age = today.getFullYear() - birthDate.getFullYear();
      const monthDiff = today.getMonth() - birthDate.getMonth();
      if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
        age--;
      }
      return age >= 18;
    }

    // Обработчик ввода
    const passwordInput = document.getElementById('password');
    const confirmPasswordInput = document.getElementById('confirm-password');
    const dobInput = document.getElementById('dob');
    const passwordError = document.getElementById('password-error');
    const confirmPasswordError = document.getElementById('confirm-password-error');
    const dobError = document.getElementById('dob-error');
    const passwordGroup = document.getElementById('password-group');
    const confirmPasswordGroup = document.getElementById('confirm-password-group');
    const dobGroup = document.getElementById('dob-group');

    function checkInputs() {
      const password = passwordInput.value;
      const confirmPassword = confirmPasswordInput.value;
      const dob = dobInput.value;
      const validation = validatePassword(password);

      // Сброс стилей
      passwordGroup.classList.remove('input-error');
      confirmPasswordGroup.classList.remove('input-error');
      dobGroup.classList.remove('input-error');
      passwordError.style.display = 'none';
      confirmPasswordError.style.display = 'none';
      dobError.style.display = 'none';

      // Проверка пароля
      if (!validation.isValid) {
        passwordGroup.classList.add('input-error');
        passwordError.style.display = 'block';
        passwordError.textContent = 'Your password does not meet the requirements';
      }

      // Проверка совпадения паролей
      if (confirmPassword && password !== confirmPassword) {
        confirmPasswordGroup.classList.add('input-error');
        confirmPasswordError.style.display = 'block';
        confirmPasswordError.textContent = 'Passwords do not match';
      }

      // Проверка возраста
      if (dob && !validateAge(dob)) {
        dobGroup.classList.add('input-error');
        dobError.style.display = 'block';
        dobError.textContent = 'You must be at least 18 years old';
      }

      return validation.isValid && (confirmPassword === '' || password === confirmPassword) && (dob === '' || validateAge(dob));
    }

    // Проверка при вводе
    passwordInput.addEventListener('input', checkInputs);
    confirmPasswordInput.addEventListener('input', checkInputs);
    dobInput.addEventListener('change', checkInputs); // Проверка при выборе даты

    // Показываем поле для кода при клике на ссылку
    document.getElementById('verify-link').addEventListener('click', function(e) {
      e.preventDefault();

      if (!checkInputs()) {
        return;
      }

      document.getElementById('verification-code').style.display = 'block';
    });

    // Проверяем введённый код
    document.getElementById('code').addEventListener('input', function() {
      const code = this.value;
      if (code === '1234') { // Условный код
        // Скрываем форму
        document.getElementById('username-group').style.display = 'none';
        document.getElementById('firstname-group').style.display = 'none';
        document.getElementById('secondname-group').style.display = 'none';
        document.getElementById('email-group').style.display = 'none';
        document.getElementById('password-group').style.display = 'none';
        document.getElementById('confirm-password-group').style.display = 'none';
        document.getElementById('dob-group').style.display = 'none';
        document.getElementById('verify-link-container').style.display = 'none';
        document.getElementById('verification-code').style.display = 'none';
        // Показываем успех
        document.getElementById('success-message').style.display = 'block';
      }
    });
  </script>
</body>
</html>


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Registration</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background-color: #ffe600; /* –∂—ë–ª—Ç—ã–π —Ñ–æ–Ω */
    }

    /* –í–µ—Ä—Ö–Ω–µ–µ –º–µ–Ω—é */
    .navbar {
      background-color: black;
      padding: 10px 20px;
      border-bottom-left-radius: 50px;
      display: flex;
      gap: 15px;
    }

    .navbar a {
      color: white;
      text-decoration: none;
      font-style: italic;
      font-size: 14px;
    }

    /* –ë–ª–æ–∫ —Ñ–æ—Ä–º—ã */
    .registration-box {
      border: 3px solid black;
      border-radius: 35px;
      width: 600px;
      margin: 40px auto;
      padding: 30px 40px;
      background-color: transparent;
      text-align: center;
    }

    .registration-box h2 {
      font-style: italic;
      margin-bottom: 25px;
    }

    /* –°—Ç–∏–ª–∏ –ø–æ–ª–µ–π –∏ –ø–æ–¥–ø–∏—Å–µ–π */
    .form-group {
      display: block;
      margin-top: 15px;
      text-align: left;
    }

    .form-group label {
      font-style: italic;
    }

    .form-group input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #333;
      box-sizing: border-box;
      transition: border-color 0.3s ease;
    }

    .form-group.input-error input {
      border-color: red;
    }

    .verify {
      margin-top: 20px;
      font-style: italic;
      font-size: 13px;
      text-align: center;
      text-decoration: underline;
    }

    .verification-code {
      display: none;
      margin-top: 15px;
      text-align: left;
    }

    .verification-code label {
      font-style: italic;
    }

    .verification-links {
      margin-top: 10px;
      text-align: center;
      font-size: 13px;
    }

    .verification-links a {
      font-style: italic;
      text-decoration: underline;
      margin: 0 10px;
      color: black;
    }

    .success-message {
      display: none;
    }

    .success-message h2 {
      font-style: italic;
      margin-bottom: 25px;
    }

    .account-button {
      display: inline-block;
      padding: 12px 25px;
      background-color: black;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      font-family: Arial, sans-serif;
      font-style: italic;
      font-size: 16px;
    }

    .account-button:hover {
      background-color: #333;
    }

    /* –£–±–∏—Ä–∞–µ–º —Å—Ç—Ä–µ–ª–∫–∏ —É –ø–æ–ª—è –≤–≤–æ–¥–∞, —Å–æ—Ö—Ä–∞–Ω—è—è —Ä–∞–∑–º–µ—Ä */
    .verification-code input {
      -moz-appearance: textfield;
    }
    .verification-code input::-webkit-outer-spin-button,
    .verification-code input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    /* –°—Ç–∏–ª—å –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ */
    .error-message {
      display: none;
      color: red;
      font-style: italic;
      font-size: 13px;
      margin-top: 5px;
      text-align: left;
    }
  </style>
</head>
<body>

  <div class="navbar">
    <a href="index.html">Home</a>
  </div>

  <div class="registration-box">
    <h2>Complete the registration</h2>

    <div class="form-group" id="username-group">
      <label for="username"><i>Username</i></label>
      <input type="text" id="username" placeholder="Enter your username">
    </div>

    <div class="form-group" id="firstname-group">
      <label for="firstname"><i>First name</i></label>
      <input type="text" id="firstname" placeholder="Enter your first name">
    </div>

    <div class="form-group" id="secondname-group">
      <label for="secondname"><i>Second name</i></label>
      <input type="text" id="secondname" placeholder="Enter your secondname">
    </div>

    <div class="form-group" id="email-group">
      <label for="email"><i>Email address</i></label>
      <input type="email" id="email" placeholder="Enter your email">
    </div>

    <div class="form-group" id="password-group">
      <label for="password"><i>Enter the password</i></label>
      <input type="password" id="password" placeholder="Create the password">
      <ul id="password-rules" style="font-size: 13px; font-style: italic; margin-top: 10px; padding-left: 18px;">
        <li id="length">‚Ä¢ Minimum 8 characters</li>
        <li id="uppercase">‚Ä¢ At least one uppercase letter</li>
        <li id="lowercase">‚Ä¢ At least one lowercase letter</li>
        <li id="digit">‚Ä¢ At least one number</li>
        <li id="special">‚Ä¢ At least one special character (!@#$...)</li>
      </ul>
      <div id="password-error" class="error-message"></div>
    </div>

    <div class="form-group" id="confirm-password-group">
      <label for="confirm-password"><i>Confirm the password</i></label>
      <input type="password" id="confirm-password" placeholder="Confirm the password">
      <div id="confirm-password-error" class="error-message"></div>
    </div>

    <div class="form-group" id="dob-group">
      <label for="dob"><i>Date of birth</i></label>
      <input type="date" id="dob">
      <div id="dob-error" class="error-message"></div>
    </div>

    <div class="verify" id="verify-link-container">
      <a href="#" id="verify-link">Verify your email by entering the code provided in the email</a>
    </div>

    <div class="verification-code" id="verification-code">
      <label for="code"><i>Verification code</i></label>
      <input type="text" id="code" placeholder="Enter the code">
      <div class="verification-links">
        <a href="#">Didn't get code?</a>
        <a href="#">Resend the code</a>
      </div>
    </div>

    <div class="success-message" id="success-message">
    <h2>Account registered</h2>
    <div style="display: flex; flex-direction: column; gap: 15px; align-items: center;">
      <a href="MyAccount1.html" class="account-button">My account</a>
      <a href="index.html" class="account-button">Back to Home</a>
      <a href="Play5_100.html" class="account-button">Play 5/100</a>
    </div>
  </div>

  <script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è
    function validatePassword(password) {
      const lengthValid = password.length >= 8;
      const uppercaseValid = /[A-Z]/.test(password);
      const lowercaseValid = /[a-z]/.test(password);
      const digitValid = /[0-9]/.test(password);
      const specialValid = /[!@#$%^&*(),.?":{}|<>]/.test(password);
      return {
        isValid: lengthValid && uppercaseValid && lowercaseValid && digitValid && specialValid,
        issues: {
          length: !lengthValid,
          uppercase: !uppercaseValid,
          lowercase: !lowercaseValid,
          digit: !digitValid,
          special: !specialValid
        }
      };
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–æ–∑—Ä–∞—Å—Ç–∞
    function validateAge(dob) {
      const today = new Date(); // –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞ –≤ –º–æ–º–µ–Ω—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
      const birthDate = new Date(dob);
      let age = today.getFullYear() - birthDate.getFullYear();
      const monthDiff = today.getMonth() - birthDate.getMonth();
      if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
        age--;
      }
      return age >= 18;
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–≤–æ–¥–∞
    const passwordInput = document.getElementById('password');
    const confirmPasswordInput = document.getElementById('confirm-password');
    const dobInput = document.getElementById('dob');
    const passwordError = document.getElementById('password-error');
    const confirmPasswordError = document.getElementById('confirm-password-error');
    const dobError = document.getElementById('dob-error');
    const passwordGroup = document.getElementById('password-group');
    const confirmPasswordGroup = document.getElementById('confirm-password-group');
    const dobGroup = document.getElementById('dob-group');

    function checkInputs() {
      const password = passwordInput.value;
      const confirmPassword = confirmPasswordInput.value;
      const dob = dobInput.value;
      const validation = validatePassword(password);

      // –°–±—Ä–æ—Å —Å—Ç–∏–ª–µ–π
      passwordGroup.classList.remove('input-error');
      confirmPasswordGroup.classList.remove('input-error');
      dobGroup.classList.remove('input-error');
      passwordError.style.display = 'none';
      confirmPasswordError.style.display = 'none';
      dobError.style.display = 'none';

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è
      if (!validation.isValid) {
        passwordGroup.classList.add('input-error');
        passwordError.style.display = 'block';
        passwordError.textContent = 'Your password does not meet the requirements';
      }

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
      if (confirmPassword && password !== confirmPassword) {
        confirmPasswordGroup.classList.add('input-error');
        confirmPasswordError.style.display = 'block';
        confirmPasswordError.textContent = 'Passwords do not match';
      }

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞
      if (dob && !validateAge(dob)) {
        dobGroup.classList.add('input-error');
        dobError.style.display = 'block';
        dobError.textContent = 'You must be at least 18 years old';
      }

      return validation.isValid && (confirmPassword === '' || password === confirmPassword) && (dob === '' || validateAge(dob));
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –≤–≤–æ–¥–µ
    passwordInput.addEventListener('input', checkInputs);
    confirmPasswordInput.addEventListener('input', checkInputs);
    dobInput.addEventListener('change', checkInputs); // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –¥–∞—Ç—ã

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–µ –¥–ª—è –∫–æ–¥–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É
    document.getElementById('verify-link').addEventListener('click', function(e) {
      e.preventDefault();

      if (!checkInputs()) {
        return;
      }

      document.getElementById('verification-code').style.display = 'block';
    });

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–≤–µ–¥—ë–Ω–Ω—ã–π –∫–æ–¥
    document.getElementById('code').addEventListener('input', function() {
      const code = this.value;
      if (code === '1234') { // –£—Å–ª–æ–≤–Ω—ã–π –∫–æ–¥
        // –°–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
        document.getElementById('username-group').style.display = 'none';
        document.getElementById('firstname-group').style.display = 'none';
        document.getElementById('secondname-group').style.display = 'none';
        document.getElementById('email-group').style.display = 'none';
        document.getElementById('password-group').style.display = 'none';
        document.getElementById('confirm-password-group').style.display = 'none';
        document.getElementById('dob-group').style.display = 'none';
        document.getElementById('verify-link-container').style.display = 'none';
        document.getElementById('verification-code').style.display = 'none';
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—Ö
        document.getElementById('success-message').style.display = 'block';
      }
    });
  </script>

<button id="googleRegisterBtn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ Google</button>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAuth, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
  import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDs_d2wciY6Zzw49H3uOJfxNeSxnSBhVWQ",
    authDomain: "test-loto-11.firebaseapp.com",
    projectId: "test-loto-11",
    storageBucket: "test-loto-11.appspot.com",
    messagingSenderId: "58439644315",
    appId: "1:58439644315:web:7f517769d27d0a7510023e"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const provider = new GoogleAuthProvider();

  document.getElementById("googleRegisterBtn").addEventListener("click", () => {
    signInWithPopup(auth, provider)
      .then(async (result) => {
        const user = result.user;

        // üîê –ó–∞–ø–∏—Å—å –≤ Firestore (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
        await setDoc(doc(db, "users", user.uid), {
          email: user.email,
          name: user.displayName,
          createdAt: new Date()
        });

        alert(`–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${user.displayName}!`);
      })
      .catch((error) => {
        console.error(error);
        alert("–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Google: " + error.message);
      });
  });
</script>



</body>
</html>
